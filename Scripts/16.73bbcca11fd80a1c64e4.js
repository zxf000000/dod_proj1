(function(){var y=document&&document.currentScript&&document.currentScript.src;(window.webpackJsonpruntime=window.webpackJsonpruntime||[]).push([[16],{reOo:function(E,o,r){"use strict";r.r(o),r.d(o,"init",function(){return p});var m=r("yXPU"),g=r.n(m),h=r("J66h"),D=r.n(h);class c{constructor({container:t}){this._positionHandlers={start:()=>{this.handle.style.setProperty("left","0"),this._clipAfterImg(0)},center:i=>{this.handle.style.setProperty("left",""),this._clipAfterImg(i.width/2)},end:i=>{this.handle.style.setProperty("left",`${i.width}px`),this._clipAfterImg(i.width)}},this.container=t,this.doc=this.container.ownerDocument.documentElement,this._initialized=this.initSizes();const e=this.handle.getBoundingClientRect();this.offset={left:e.width/2,top:e.height/2},this._bindMethods(),this.handle.style.setProperty("left",""),this.handle.addEventListener("touchstart",this.startDragging),this.handle.addEventListener("mousedown",this.startDragging),this.observer=new MutationObserver(this.updateData),this.observer.observe(this.container,{attributes:!0,childList:!1,subtree:!1})}initSizes(){var t=this;return g()(function*(){t.beforeImg=t.container.querySelector(".baf__img-preview.baf__before"),t.afterImg=t.container.querySelector(".baf__img-preview.baf__after"),t.innerAfterImg=t.afterImg.querySelector("img"),t.handle=t.container.querySelector(".baf__handle"),yield Promise.all([t._waitForImgLoad(t.beforeImg),t._waitForImgLoad(t.innerAfterImg)]),t._rePosition(),t.container.ownerDocument.defaultView.addEventListener("resize",t._rePosition),t.container.ownerDocument.defaultView.addEventListener("orientationchange",t._rePosition)})()}release(){this.observer.disconnect(),this.handle.removeEventListener("touchstart",this.startDragging),this.handle.removeEventListener("mousedown",this.startDragging),this.container.ownerDocument.defaultView.removeEventListener("resize",this._rePosition),this.container.ownerDocument.defaultView.removeEventListener("orientationchange",this._rePosition),this._stopTrackingMouseEvents()}startDragging(t){this.container.classList.add("baf__dragging"),this.container.classList.add("user-interacting"),this.containerRect=this.container.getBoundingClientRect();const e=this.handle.getBoundingClientRect(),{clientX:i}=d(t);this.handle.style.transform=`translate(${i-this.containerRect.left-e.width/2}px, -50%)`,this.handle.style.left="",this._startTrackingMouseEvents()}performUpdates(t){const{clientX:e}=d(t);this.movedTo=this._calculateMoveTo(e),this.handle.style.transform=`translate(${this.movedTo-this.offset.left}px, -50%)`,this._clipAfterImg(this.movedTo)}_calculateMoveTo(t){const e=t-this.containerRect.left,i=Math.max(0,e);return e>this.containerRect.width?this.containerRect.width:i}updatesAfterDrag(){this.container.classList.remove("baf__dragging"),this.container.classList.remove("user-interacting"),this.handle.style.setProperty("transform",""),this.handle.style.setProperty("left",`${this.movedTo}px`),this._stopTrackingMouseEvents()}updateData(t){Array.from(t).forEach(({attributeName:e})=>{if(e!=="data-ext")return;const i=this.extractData();this.applyData(i)})}extractData(){return JSON.parse(h.Base64.decode(this.container.dataset.ext))}applyData({imgBefore:t,imgBeforeAlt:e,imgAfter:i,imgAfterAlt:a,beforeText:l,afterText:_,beforeTextVisible:v,afterTextVisible:b}){this.beforeImg.src=t||this.beforeImg.src,this.beforeImg.setAttribute("alt",e),this.innerAfterImg.src=i||this.innerAfterImg.src,this.innerAfterImg.setAttribute("alt",a);const u=this.container.querySelector(".baf__title"),f=this.container.querySelector(".baf__title.baf__before");u.innerText=l,u.classList.toggle("baf__title--hidden",!v),f.innerText=_,f.classList.toggle("baf__title--hidden",!b),this._initialized=this.initSizes()}_rePosition(){const{width:t,height:e}=getComputedStyle(this.container);this.afterImg.style.width=t,this.afterImg.style.height=e;const i=this.container.getBoundingClientRect();this.handle.style.setProperty("left","");const{initialPosition:a}=this.extractData();(this._positionHandlers[a]||this._positionHandlers.center)(i)}_clipAfterImg(t){this.afterImg.style.transform=`translate(${t}px, 0)`,this.innerAfterImg.style.transform=`translate(-${t}px, 0)`}_stopTrackingMouseEvents(){this.doc.removeEventListener("touchmove",this.performUpdates,{passive:!0,capture:!0}),this.doc.removeEventListener("mousemove",this.performUpdates,{passive:!0,capture:!0}),this.doc.removeEventListener("touchend",this.updatesAfterDrag,{capture:!0}),this.doc.removeEventListener("mouseup",this.updatesAfterDrag,{capture:!0})}_startTrackingMouseEvents(){this.doc.addEventListener("touchmove",this.performUpdates,{passive:!0,capture:!0}),this.doc.addEventListener("mousemove",this.performUpdates,{passive:!0,capture:!0}),this.doc.addEventListener("touchend",this.updatesAfterDrag,{capture:!0}),this.doc.addEventListener("mouseup",this.updatesAfterDrag,{capture:!0})}_waitForImgLoad(t){return new Promise(e=>{t.onload=()=>{window.requestAnimationFrame(e)},t.src=t.src.slice()})}_bindMethods(){this.startDragging=this.startDragging.bind(this),this.performUpdates=this.performUpdates.bind(this),this.updatesAfterDrag=this.updatesAfterDrag.bind(this),this.updateData=this.updateData.bind(this),this._rePosition=this._rePosition.bind(this)}}c.displayName="BeforeAndAfter";const n={};function p(s){return Array.from(document.querySelectorAll(".dmBeforeAndAfter")).forEach(e=>{n[e.id]&&n[e.id].release(),n[e.id]=new c({container:e})}),n[(s||{}).id]||{}}function d(s){return s.type.includes("touch")?(s.touches||s.changedTouches)[0]:s}}}])})();
